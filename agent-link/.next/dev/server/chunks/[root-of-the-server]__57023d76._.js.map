{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/abhijeetnag/Desktop/startups/AgentLink_Startup/agent-link/src/app/api/submit/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\n// Get the Google Apps Script webhook URL from environment variables\nconst GOOGLE_SCRIPT_URL = process.env.GOOGLE_SCRIPT_URL || '';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { type, email, agentName, walletAddress, walletName, walletIcon } = body;\n\n    // Handle wallet connection logging\n    if (type === 'wallet_connection') {\n      if (!walletAddress) {\n        return NextResponse.json(\n          { error: 'Wallet address is required' },\n          { status: 400 }\n        );\n      }\n\n      // If no Google Script URL is configured, just log the data\n      if (!GOOGLE_SCRIPT_URL) {\n        console.log('Wallet connection (Google Sheets not configured):', {\n          type: 'wallet_connection',\n          walletAddress,\n          walletName: walletName || 'Unknown',\n          walletIcon: walletIcon || '',\n          timestamp: new Date().toISOString(),\n        });\n        \n        return NextResponse.json(\n          { \n            success: true, \n            message: 'Wallet connection logged (not saved to Google Sheets - configure GOOGLE_SCRIPT_URL)' \n          },\n          { status: 200 }\n        );\n      }\n\n      // Prepare data for Google Sheets\n      const sheetData = {\n        type: 'wallet_connection',\n        email: '', // Not applicable for wallet connections\n        agentName: '', // Not applicable for wallet connections\n        walletAddress,\n        walletName: walletName || 'Unknown',\n        walletIcon: walletIcon || '',\n        timestamp: new Date().toISOString(),\n      };\n\n      // Send to Google Apps Script webhook\n      const response = await fetch(GOOGLE_SCRIPT_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(sheetData),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to submit to Google Sheets');\n      }\n\n      return NextResponse.json(\n        { success: true, message: 'Wallet connection logged successfully' },\n        { status: 200 }\n      );\n    }\n\n    // Handle email/namespace submissions (existing logic)\n    // Validate required fields\n    if (!email) {\n      return NextResponse.json(\n        { error: 'Email is required' },\n        { status: 400 }\n      );\n    }\n\n    // If no Google Script URL is configured, just log the data\n    if (!GOOGLE_SCRIPT_URL) {\n      console.log('Form submission (Google Sheets not configured):', {\n        type: type || 'email',\n        email,\n        agentName: agentName || null,\n        timestamp: new Date().toISOString(),\n      });\n      \n      return NextResponse.json(\n        { \n          success: true, \n          message: 'Submitted successfully (not saved to Google Sheets - configure GOOGLE_SCRIPT_URL)' \n        },\n        { status: 200 }\n      );\n    }\n\n    // Prepare data for Google Sheets\n    const sheetData = {\n      type: type || 'email',\n      email,\n      agentName: agentName || '',\n      timestamp: new Date().toISOString(),\n    };\n\n    // Send to Google Apps Script webhook\n    const response = await fetch(GOOGLE_SCRIPT_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(sheetData),\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to submit to Google Sheets');\n    }\n\n    return NextResponse.json(\n      { success: true, message: 'Submitted successfully' },\n      { status: 200 }\n    );\n  } catch (error) {\n    console.error('Error submitting form:', error);\n    return NextResponse.json(\n      { error: 'Failed to submit form' },\n      { status: 500 }\n    );\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;;AAEA,oEAAoE;AACpE,MAAM,oBAAoB,QAAQ,GAAG,CAAC,iBAAiB,IAAI;AAEpD,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,aAAa,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG;QAE1E,mCAAmC;QACnC,IAAI,SAAS,qBAAqB;YAChC,IAAI,CAAC,eAAe;gBAClB,OAAO,gJAAY,CAAC,IAAI,CACtB;oBAAE,OAAO;gBAA6B,GACtC;oBAAE,QAAQ;gBAAI;YAElB;YAEA,2DAA2D;YAC3D,IAAI,CAAC,mBAAmB;gBACtB,QAAQ,GAAG,CAAC,qDAAqD;oBAC/D,MAAM;oBACN;oBACA,YAAY,cAAc;oBAC1B,YAAY,cAAc;oBAC1B,WAAW,IAAI,OAAO,WAAW;gBACnC;gBAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;oBACE,SAAS;oBACT,SAAS;gBACX,GACA;oBAAE,QAAQ;gBAAI;YAElB;YAEA,iCAAiC;YACjC,MAAM,YAAY;gBAChB,MAAM;gBACN,OAAO;gBACP,WAAW;gBACX;gBACA,YAAY,cAAc;gBAC1B,YAAY,cAAc;gBAC1B,WAAW,IAAI,OAAO,WAAW;YACnC;YAEA,qCAAqC;YACrC,MAAM,WAAW,MAAM,MAAM,mBAAmB;gBAC9C,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAM,SAAS;YAAwC,GAClE;gBAAE,QAAQ;YAAI;QAElB;QAEA,sDAAsD;QACtD,2BAA2B;QAC3B,IAAI,CAAC,OAAO;YACV,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QAEA,2DAA2D;QAC3D,IAAI,CAAC,mBAAmB;YACtB,QAAQ,GAAG,CAAC,mDAAmD;gBAC7D,MAAM,QAAQ;gBACd;gBACA,WAAW,aAAa;gBACxB,WAAW,IAAI,OAAO,WAAW;YACnC;YAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,SAAS;YACX,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,iCAAiC;QACjC,MAAM,YAAY;YAChB,MAAM,QAAQ;YACd;YACA,WAAW,aAAa;YACxB,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,qCAAqC;QACrC,MAAM,WAAW,MAAM,MAAM,mBAAmB;YAC9C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAM,SAAS;QAAyB,GACnD;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}